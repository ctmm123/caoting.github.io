
<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>曹婷 | 资深 HRBP & AI 应用专家</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Noto+Sans+SC:wght@300;400;500;700&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Noto Sans SC', 'Inter', 'sans-serif'],
                    },
                    colors: {
                        slate: {
                            950: '#020617', // Darker background
                        }
                    },
                    animation: {
                        'spin-slow': 'spin 8s linear infinite',
                        'bounce-slow': 'bounce 3s infinite',
                    }
                }
            }
        }
    </script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Import Map for Google GenAI -->
    <script type="importmap">
{
  "imports": {
    "@google/genai": "https://esm.run/@google/genai@0.1.1",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "framer-motion": "https://aistudiocdn.com/framer-motion@^12.23.24",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.555.0",
    "recharts": "https://aistudiocdn.com/recharts@^3.5.0"
  }
}
</script>

    <style>
        body {
            background-color: #020617;
            color: #f8fafc;
            overflow-x: hidden;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a;
        }
        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }

        /* Glassmorphism Classes */
        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }
        
        .glass-nav {
            background: rgba(2, 6, 23, 0.8);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Animation Utilities */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.5, 0, 0, 1);
        }
        
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        .typing-dot {
            animation: typing 1.4s infinite ease-in-out both;
        }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
    </style>
<link rel="stylesheet" href="/index.css">
</head>
<body class="selection:bg-cyan-500/30 selection:text-cyan-200">

    <!-- Loading Screen -->
    <div id="loader" class="fixed inset-0 z-[60] flex items-center justify-center bg-slate-950 transition-opacity duration-500">
        <div class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500 animate-pulse">
            NEXUS
        </div>
    </div>

    <!-- Background Gradients -->
    <div class="fixed inset-0 z-0 pointer-events-none overflow-hidden">
        <div class="absolute top-[-10%] left-[-10%] w-[40%] h-[40%] rounded-full bg-purple-900/20 blur-[120px]"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] rounded-full bg-cyan-900/20 blur-[120px]"></div>
        <div class="absolute top-[40%] left-[40%] w-[20%] h-[20%] rounded-full bg-blue-900/10 blur-[100px]"></div>
    </div>

    <!-- Header -->
    <header id="header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 py-5">
        <div class="container mx-auto px-6 flex items-center justify-between">
            <a href="#hero" class="flex items-center gap-2 cursor-pointer group">
                <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-cyan-400 to-purple-600 flex items-center justify-center font-bold text-white shadow-lg group-hover:shadow-cyan-500/50 transition-shadow">
                    曹
                </div>
                <span class="text-lg font-bold tracking-tight text-white">
                    曹婷<span class="text-cyan-400">.hr</span>
                </span>
            </a>

            <!-- Desktop Nav -->
            <nav class="hidden md:flex items-center gap-1">
                <a href="#hero" class="nav-link px-4 py-2 text-sm text-slate-300 hover:text-white transition-colors relative group">
                    关于我
                    <span class="absolute bottom-1 left-1/2 w-0 h-0.5 bg-cyan-400 transition-all duration-300 group-hover:w-1/2 group-hover:left-1/4"></span>
                </a>
                <a href="#experience" class="nav-link px-4 py-2 text-sm text-slate-300 hover:text-white transition-colors relative group">
                    工作经历
                    <span class="absolute bottom-1 left-1/2 w-0 h-0.5 bg-cyan-400 transition-all duration-300 group-hover:w-1/2 group-hover:left-1/4"></span>
                </a>
                <a href="#skills" class="nav-link px-4 py-2 text-sm text-slate-300 hover:text-white transition-colors relative group">
                    核心技能
                    <span class="absolute bottom-1 left-1/2 w-0 h-0.5 bg-cyan-400 transition-all duration-300 group-hover:w-1/2 group-hover:left-1/4"></span>
                </a>
                <a href="#projects" class="nav-link px-4 py-2 text-sm text-slate-300 hover:text-white transition-colors relative group">
                    重点项目
                    <span class="absolute bottom-1 left-1/2 w-0 h-0.5 bg-cyan-400 transition-all duration-300 group-hover:w-1/2 group-hover:left-1/4"></span>
                </a>
                <a href="#education" class="nav-link px-4 py-2 text-sm text-slate-300 hover:text-white transition-colors relative group">
                    教育背景
                    <span class="absolute bottom-1 left-1/2 w-0 h-0.5 bg-cyan-400 transition-all duration-300 group-hover:w-1/2 group-hover:left-1/4"></span>
                </a>
                <a href="#contact" class="nav-link px-4 py-2 text-sm text-slate-300 hover:text-white transition-colors relative group">
                    联系方式
                    <span class="absolute bottom-1 left-1/2 w-0 h-0.5 bg-cyan-400 transition-all duration-300 group-hover:w-1/2 group-hover:left-1/4"></span>
                </a>
            </nav>

            <!-- Mobile Toggle -->
            <button id="mobile-menu-btn" class="md:hidden text-slate-200 hover:text-cyan-400 transition-colors">
                <i data-lucide="menu"></i>
            </button>
        </div>

        <!-- Mobile Nav Menu -->
        <div id="mobile-menu" class="hidden md:hidden glass-nav border-t border-slate-800 absolute w-full transition-all duration-300 origin-top transform scale-y-0 opacity-0">
            <div class="flex flex-col p-4 gap-2" id="mobile-links">
                <!-- Populated by JS -->
            </div>
        </div>
    </header>

    <main class="relative z-10 container mx-auto px-4 md:px-8 max-w-7xl">
        
        <!-- Hero Section -->
        <section id="hero" class="min-h-screen flex flex-col justify-center items-center pt-20 relative">
            <div class="text-center z-10 reveal">
                <div class="relative mb-8 inline-block group cursor-pointer" onclick="document.getElementById('avatar-input').click()">
                    <div class="w-32 h-32 md:w-44 md:h-44 rounded-full border-4 border-cyan-500/30 overflow-hidden relative z-10 bg-slate-800 shadow-2xl shadow-cyan-900/20">
                        <img id="avatar-img" src="https://picsum.photos/400/400?grayscale" alt="Avatar" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                        
                        <!-- Edit Overlay -->
                        <div class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col items-center justify-center backdrop-blur-sm">
                            <i data-lucide="camera" class="text-white mb-1 w-6 h-6"></i>
                            <span class="text-white/90 text-xs font-medium">更换头像</span>
                        </div>
                    </div>
                    <input type="file" id="avatar-input" class="hidden" accept="image/*">
                    
                    <!-- Decorative Ring -->
                    <div class="absolute top-[-10px] left-[-10px] right-[-10px] bottom-[-10px] rounded-full border border-dashed border-cyan-500/20 animate-spin-slow pointer-events-none"></div>
                </div>

                <h2 class="text-cyan-400 font-medium tracking-widest text-sm md:text-base uppercase mb-4 reveal" style="transition-delay: 100ms">
                    你好，我是 <span id="hero-name"></span>
                </h2>

                <h1 class="text-5xl md:text-7xl font-bold mb-6 tracking-tight reveal" style="transition-delay: 200ms">
                    <span class="block text-slate-100 mb-2">欢迎来到</span>
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-purple-500 to-pink-500">
                        我的主页
                    </span>
                </h1>

                <p id="hero-tagline" class="max-w-xl mx-auto text-slate-400 text-lg md:text-xl leading-relaxed mb-10 reveal" style="transition-delay: 300ms"></p>

                <div class="flex flex-col md:flex-row gap-4 justify-center items-center reveal" style="transition-delay: 400ms">
                    <button onclick="downloadResume()" class="px-8 py-3 bg-cyan-500 hover:bg-cyan-600 text-slate-950 font-bold rounded-full transition-all flex items-center gap-2 hover:scale-105 active:scale-95 shadow-lg shadow-cyan-500/25">
                        <i data-lucide="download" class="w-5 h-5"></i>
                        下载简历
                    </button>
                    
                    <button onclick="previewResume()" class="px-8 py-3 glass-card text-white font-medium rounded-full hover:bg-white/10 transition-all flex items-center gap-2 hover:scale-105 active:scale-95">
                        <i data-lucide="eye" class="w-5 h-5"></i>
                        在线预览
                    </button>
                </div>
            </div>

            <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 text-slate-500 animate-bounce-slow">
                <i data-lucide="chevron-down" class="w-8 h-8"></i>
            </div>
        </section>

        <!-- Experience Section -->
        <section id="experience" class="py-20">
            <div class="flex items-center gap-4 mb-12 reveal">
                <div class="p-3 rounded-lg bg-purple-500/10 text-purple-400">
                    <i data-lucide="briefcase" class="w-6 h-6"></i>
                </div>
                <h2 class="text-3xl md:text-4xl font-bold text-slate-100">工作经历</h2>
            </div>
            <div id="experience-list" class="grid grid-cols-1 gap-8">
                <!-- Populated by JS -->
            </div>
        </section>

        <!-- Skills Section -->
        <section id="skills" class="py-20 relative overflow-hidden">
            <div class="absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-cyan-900/5 to-transparent pointer-events-none"></div>
            
            <div class="flex items-center gap-4 mb-12 relative z-10 reveal">
                <div class="p-3 rounded-lg bg-cyan-500/10 text-cyan-400">
                    <i data-lucide="database" class="w-6 h-6"></i>
                </div>
                <h2 class="text-3xl md:text-4xl font-bold text-slate-100">核心技能</h2>
            </div>

            <div class="flex flex-col lg:flex-row gap-12 items-center">
                <!-- Chart -->
                <div class="w-full lg:w-1/2 h-[400px] glass-card rounded-2xl p-4 flex items-center justify-center reveal">
                    <canvas id="skillsChart"></canvas>
                </div>

                <!-- List Details -->
                <div id="skills-list" class="w-full lg:w-1/2 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Populated by JS -->
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="py-20">
            <div class="flex items-center gap-4 mb-12 reveal">
                <div class="p-3 rounded-lg bg-pink-500/10 text-pink-400">
                    <i data-lucide="layout" class="w-6 h-6"></i>
                </div>
                <h2 class="text-3xl md:text-4xl font-bold text-slate-100">重点项目</h2>
            </div>

            <div id="projects-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Populated by JS -->
            </div>
        </section>

        <!-- Education Section -->
        <section id="education" class="py-20">
            <div class="flex items-center gap-4 mb-12 reveal">
                <div class="p-3 rounded-lg bg-orange-500/10 text-orange-400">
                    <i data-lucide="graduation-cap" class="w-6 h-6"></i>
                </div>
                <h2 class="text-3xl md:text-4xl font-bold text-slate-100">教育背景</h2>
            </div>

            <div id="education-list" class="relative border-l-2 border-slate-800 ml-3 md:ml-6 space-y-12">
                <!-- Populated by JS -->
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-20 pb-40 text-center">
            <div class="max-w-2xl mx-auto glass-card p-10 rounded-3xl reveal border border-slate-800/50">
                <h2 class="text-3xl md:text-4xl font-bold text-white mb-6">期待与您合作</h2>
                <p class="text-slate-400 mb-8 text-lg">
                    我目前正在寻找新的职业机会。无论是关于HRBP职位的咨询，还是技术交流，欢迎随时联系我！
                </p>

                <div id="socials-list" class="flex justify-center gap-6 mb-10">
                   <!-- Populated by JS -->
                </div>

                <a id="email-btn" href="#" class="inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-purple-600 to-cyan-600 text-white font-bold rounded-full shadow-lg shadow-purple-900/50 hover:scale-105 transition-transform">
                    <i data-lucide="mail" class="w-5 h-5"></i>
                    发送邮件
                </a>
            </div>
        </section>

        <footer class="py-8 text-center text-slate-600 text-sm glass-card mt-20 border-t border-slate-800">
            <p>© <span id="year"></span> <span id="footer-name"></span>. Built with Vanilla JS, Tailwind & Gemini AI.</p>
        </footer>
    </main>

    <!-- AI ChatBot -->
    <div class="fixed bottom-6 right-6 z-50 flex flex-col items-end gap-4">
        <!-- Chat Window -->
        <div id="chat-window" class="hidden w-[350px] md:w-[400px] h-[500px] glass-nav rounded-2xl border border-slate-700 shadow-2xl flex flex-col overflow-hidden transition-all duration-300 origin-bottom-right transform scale-90 opacity-0">
            <!-- Header -->
            <div class="bg-gradient-to-r from-purple-900/80 to-cyan-900/80 p-4 flex items-center justify-between border-b border-white/10">
                <div class="flex items-center gap-2 text-white">
                    <i data-lucide="sparkles" class="text-yellow-400 w-5 h-5"></i>
                    <span class="font-bold">Resume Assistant</span>
                </div>
                <button onclick="toggleChat()" class="text-slate-300 hover:text-white transition-colors">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>

            <!-- Messages -->
            <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-4 bg-slate-950/50 scroll-smooth">
                <!-- Initial Message -->
                <div class="flex gap-3">
                    <div class="w-8 h-8 rounded-full bg-cyan-600 flex items-center justify-center shrink-0">
                        <i data-lucide="bot" class="w-4 h-4 text-white"></i>
                    </div>
                    <div class="max-w-[80%] rounded-xl p-3 text-sm leading-relaxed bg-cyan-900/40 border border-cyan-800/50 text-cyan-100 rounded-tl-none">
                        你好！我是曹婷的AI助手。你可以问我关于她的工作经验、技能或项目的任何问题。
                    </div>
                </div>
            </div>

            <!-- Input -->
            <form id="chat-form" class="p-4 bg-slate-900 border-t border-white/5 flex gap-2">
                <input
                    type="text"
                    id="chat-input"
                    placeholder="询问我的项目经历..."
                    class="flex-1 bg-slate-800 text-white rounded-lg px-4 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-cyan-500 placeholder-slate-500"
                    autocomplete="off"
                />
                <button
                    type="submit"
                    id="chat-submit"
                    class="bg-cyan-600 hover:bg-cyan-500 text-white p-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                >
                    <i data-lucide="send" class="w-5 h-5"></i>
                </button>
            </form>
        </div>

        <!-- Toggle Button -->
        <button
            onclick="toggleChat()"
            class="w-14 h-14 rounded-full bg-gradient-to-r from-cyan-500 to-purple-600 shadow-lg shadow-purple-500/30 flex items-center justify-center text-white hover:scale-110 active:scale-95 transition-all"
        >
            <i data-lucide="message-square" class="w-6 h-6" id="chat-toggle-icon"></i>
        </button>
    </div>

    <!-- Application Logic -->
    <script type="module">
        import { GoogleGenAI } from "@google/genai";

        // --- Data ---
        const RESUME_DATA = {
            name: "曹婷",
            title: "资深 HRBP & AI 应用探索者",
            avatar: "https://picsum.photos/400/400?grayscale",
            tagline: "将 AI 技术融入人力资源管理，用数据驱动组织效能提升。",
            about: "拥有3年工作经验的互联网HRBP，成长于网易HR体系。熟练掌握组织发展(OD)、薪酬绩效、人才发展(TD)等各模块工作。擅长人力资源数据分析与效能分析，并持有AI Prompt Engineer及AI Agent认证，致力于通过AI技术优化人力资源解决方案。",
            
            socials: [
                { name: "Phone", icon: "phone", url: "tel:18005668946" },
                { name: "Email", icon: "mail", url: "mailto:915171034@qq.com" },
            ],

            experience: [
                {
                    id: "1",
                    role: "HRBP (人力资源业务合作伙伴)",
                    company: "浙江翼信科技有限公司",
                    period: "2022.08 - 至今",
                    description: [
                        "参与公司战略共创，通过OKR工具拆解目标，推动组织定期复盘与进化迭代。",
                        "主导人才发展计划，包括职业路径规划、能力提升及继任者培养，组织年度晋升。",
                        "制定薪酬管理制度及员工手册，负责整体薪酬核算、调薪及五险一金管理。",
                        "定期进行人才盘点与结构评估，优化管理干部配置，选拔关键岗位人才。",
                        "深入业务一线，提供定制化HR解决方案，推动企业文化建设与员工关怀。"
                    ],
                    techStack: ["OKR管理", "薪酬设计", "人才盘点", "文化建设"]
                },
                {
                    id: "2",
                    role: "人力资源专员/助理",
                    company: "浙江顺路物流有限公司",
                    period: "2022.04 - 2022.08",
                    description: [
                        "协助优化员工等级评定方案，完善职级体系。",
                        "搭建流失管控制度体系，实时跟踪各场地人员流失情况并制定对策。",
                        "规范员工季度晋升考核数据的收集模板，提升数据准确性。"
                    ],
                    techStack: ["流失率分析", "职级体系", "数据规范"]
                },
                {
                    id: "3",
                    role: "招聘运营 (实习)",
                    company: "网易（杭州）网络有限公司",
                    period: "2021.03 - 2021.11",
                    description: [
                        "负责社会招聘运营，日均筛选简历100+，安排面试5+，月均Offer 25份。",
                        "撰写招聘数据分析报告，优化招聘渠道投放策略。",
                        "负责面试官运营及内推渠道运营，岗位需求满足度达到100%。"
                    ],
                    techStack: ["高通量招聘", "数据运营", "渠道管理"]
                }
            ],

            education: [
                {
                    id: "1",
                    degree: "应用经济学 硕士",
                    school: "南京信息工程大学",
                    year: "2019 - 2022",
                    details: "担任班级学习委员，参与多项学术会议并发表2篇论文。组织学校能源与气候会议。"
                },
                {
                    id: "2",
                    degree: "经济学 本科",
                    school: "淮北师范大学",
                    year: "2014 - 2018",
                    details: "获三好学生、奖学金，担任大学生科技创新协会副部长。"
                }
            ],

            skills: [
                { subject: '组织发展 (OD)', A: 90, fullMark: 100 },
                { subject: '薪酬绩效 (C&B)', A: 85, fullMark: 100 },
                { subject: '人才发展 (TD)', A: 85, fullMark: 100 },
                { subject: 'HR数据分析', A: 95, fullMark: 100 },
                { subject: 'AI Agent/Prompt', A: 80, fullMark: 100 },
                { subject: '招聘配置', A: 90, fullMark: 100 },
            ],

            projects: [
                {
                    id: "1",
                    title: "OKR 战略落地实施",
                    description: "引领跨部门协作，促成四大业务线确立并认同OKR目标。通过持续监控与复盘，显著提升组织协同效率，有效推动绩效达成。",
                    tags: ["战略管理", "OKR", "组织效能"],
                    image: "https://picsum.photos/600/400?random=10",
                    link: "#"
                },
                {
                    id: "2",
                    title: "研发激励机制创新",
                    description: "构建并实施研发积分制度，实现工作量与效率的量化管理。显著提高研发团队主动性，有效推动平均工时增长，优化资源配置。",
                    tags: ["激励体系", "量化管理", "研发效能"],
                    image: "https://picsum.photos/600/400?random=11",
                    link: "#"
                },
                {
                    id: "3",
                    title: "流失率管控制系",
                    description: "针对物流行业高流失率痛点，搭建流失管控与预警体系，通过数据追踪各场地流失进展，提出针对性改进措施。",
                    tags: ["数据分析", "员工关系", "风险管控"],
                    image: "https://picsum.photos/600/400?random=12",
                    link: "#"
                }
            ]
        };

        const NAV_LINKS = [
            { name: '关于我', href: '#hero', icon: 'cpu' },
            { name: '工作经历', href: '#experience', icon: 'briefcase' },
            { name: '核心技能', href: '#skills', icon: 'brain-circuit' },
            { name: '重点项目', href: '#projects', icon: 'layout' },
            { name: '教育背景', href: '#education', icon: 'graduation-cap' },
            { name: '联系方式', href: '#contact', icon: 'mail' },
        ];

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            // Remove Loader
            setTimeout(() => {
                const loader = document.getElementById('loader');
                loader.style.opacity = '0';
                setTimeout(() => loader.remove(), 500);
            }, 1000);

            // Init Data
            initHeader();
            initHero();
            initExperience();
            initSkills();
            initProjects();
            initEducation();
            initContact();
            initFooter();
            
            // Init Logic
            setupIntersectionObserver();
            setupStickyHeader();
            setupAvatarUpload();

            // Init Icons
            lucide.createIcons();
        });

        // --- Render Functions ---

        function initHeader() {
            const mobileLinks = document.getElementById('mobile-links');
            NAV_LINKS.forEach(link => {
                const a = document.createElement('a');
                a.href = link.href;
                a.className = "flex items-center gap-3 px-4 py-3 text-slate-300 hover:bg-white/5 rounded-lg transition-all text-left";
                a.onclick = () => document.getElementById('mobile-menu-btn').click(); // Close on click
                a.innerHTML = `<i data-lucide="${link.icon}" class="text-cyan-400 w-4 h-4"></i>${link.name}`;
                mobileLinks.appendChild(a);
            });

            // Mobile Menu Toggle
            const btn = document.getElementById('mobile-menu-btn');
            const menu = document.getElementById('mobile-menu');
            let isOpen = false;

            btn.onclick = () => {
                isOpen = !isOpen;
                if(isOpen) {
                    menu.classList.remove('hidden');
                    // Small delay to allow display:block to apply before transition
                    requestAnimationFrame(() => {
                        menu.classList.remove('scale-y-0', 'opacity-0');
                    });
                    btn.innerHTML = `<i data-lucide="x"></i>`;
                } else {
                    menu.classList.add('scale-y-0', 'opacity-0');
                    setTimeout(() => menu.classList.add('hidden'), 300);
                    btn.innerHTML = `<i data-lucide="menu"></i>`;
                }
                lucide.createIcons();
            };
        }

        function initHero() {
            document.getElementById('hero-name').textContent = RESUME_DATA.name;
            document.getElementById('hero-tagline').textContent = RESUME_DATA.tagline;
            
            // Avatar from localStorage
            const savedAvatar = localStorage.getItem('nexus_resume_avatar');
            if (savedAvatar) {
                document.getElementById('avatar-img').src = savedAvatar;
            } else {
                document.getElementById('avatar-img').src = RESUME_DATA.avatar;
            }
        }

        function initExperience() {
            const container = document.getElementById('experience-list');
            RESUME_DATA.experience.forEach((job, index) => {
                const div = document.createElement('div');
                div.className = "glass-card p-6 md:p-8 rounded-2xl relative overflow-hidden group hover:border-purple-500/30 transition-colors reveal";
                div.style.transitionDelay = `${index * 100}ms`;
                
                div.innerHTML = `
                    <div class="absolute inset-0 bg-gradient-to-r from-purple-900/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"></div>
                    <div class="relative z-10 flex flex-col md:flex-row md:items-start md:justify-between gap-4 mb-6">
                        <div>
                            <h3 class="text-2xl font-bold text-white mb-1 group-hover:text-purple-300 transition-colors">${job.role}</h3>
                            <h4 class="text-lg text-slate-400">${job.company}</h4>
                        </div>
                        <div class="px-4 py-1 rounded-full bg-slate-800/50 border border-slate-700 text-sm text-slate-300 w-fit">
                            ${job.period}
                        </div>
                    </div>
                    <ul class="space-y-3 mb-6 relative z-10">
                        ${job.description.map(desc => `
                            <li class="flex items-start gap-3 text-slate-400">
                                <span class="mt-2 w-1.5 h-1.5 rounded-full bg-cyan-500 flex-shrink-0"></span>
                                <span class="leading-relaxed">${desc}</span>
                            </li>
                        `).join('')}
                    </ul>
                    <div class="flex flex-wrap gap-2 relative z-10">
                        ${job.techStack.map(tech => `
                            <span class="px-3 py-1 text-xs font-mono rounded bg-white/5 border border-white/5 text-cyan-200">${tech}</span>
                        `).join('')}
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function initSkills() {
            // Chart
            const ctx = document.getElementById('skillsChart').getContext('2d');
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: RESUME_DATA.skills.map(s => s.subject),
                    datasets: [{
                        label: '熟练度',
                        data: RESUME_DATA.skills.map(s => s.A),
                        backgroundColor: 'rgba(6, 182, 212, 0.2)',
                        borderColor: '#06b6d4',
                        borderWidth: 2,
                        pointBackgroundColor: '#22d3ee',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#22d3ee'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(255, 255, 255, 0.1)' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            pointLabels: { color: '#94a3b8', font: { size: 12 } },
                            ticks: { display: false, backdropColor: 'transparent' },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });

            // List
            const container = document.getElementById('skills-list');
            RESUME_DATA.skills.forEach((skill, index) => {
                const div = document.createElement('div');
                div.className = "bg-slate-900/50 p-4 rounded-xl border border-slate-800 reveal";
                div.style.transitionDelay = `${index * 100}ms`;
                div.innerHTML = `
                    <div class="flex justify-between mb-2">
                        <span class="font-semibold text-slate-200">${skill.subject}</span>
                        <span class="text-cyan-400 font-mono">${skill.A}%</span>
                    </div>
                    <div class="w-full h-2 bg-slate-800 rounded-full overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-cyan-600 to-purple-500" style="width: ${skill.A}%"></div>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function initProjects() {
            const container = document.getElementById('projects-grid');
            RESUME_DATA.projects.forEach((proj, index) => {
                const div = document.createElement('div');
                div.className = "group relative h-[400px] rounded-2xl overflow-hidden cursor-pointer shadow-2xl shadow-black/40 reveal";
                div.style.transitionDelay = `${index * 100}ms`;
                
                div.innerHTML = `
                    <div class="absolute inset-0">
                        <img src="${proj.image}" alt="${proj.title}" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                        <div class="absolute inset-0 bg-slate-950/40 group-hover:bg-slate-950/70 transition-colors duration-300"></div>
                    </div>
                    
                    <div class="absolute bottom-0 left-0 w-full p-6 transition-transform duration-300 transform group-hover:-translate-y-4 group-hover:opacity-0">
                        <h3 class="text-2xl font-bold text-white mb-2">${proj.title}</h3>
                        <div class="flex flex-wrap gap-2">
                            ${proj.tags.slice(0, 3).map(tag => `<span class="text-xs text-slate-300 bg-white/10 px-2 py-1 rounded backdrop-blur-sm">${tag}</span>`).join('')}
                        </div>
                    </div>

                    <div class="absolute inset-0 flex flex-col justify-center items-center p-8 bg-slate-950/80 backdrop-blur-sm text-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <h3 class="text-2xl font-bold text-cyan-400 mb-4">${proj.title}</h3>
                        <p class="text-slate-300 mb-6 leading-relaxed text-sm">${proj.description}</p>
                        <a href="${proj.link}" class="flex items-center gap-2 text-white border border-white/30 px-6 py-2 rounded-full hover:bg-white hover:text-slate-900 transition-all">
                            查看详情 <i data-lucide="external-link" class="w-4 h-4"></i>
                        </a>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function initEducation() {
            const container = document.getElementById('education-list');
            RESUME_DATA.education.forEach((edu, index) => {
                const div = document.createElement('div');
                div.className = "relative pl-8 md:pl-12 reveal";
                div.style.transitionDelay = `${index * 100}ms`;
                div.innerHTML = `
                    <div class="absolute top-0 left-[-9px] w-4 h-4 rounded-full bg-slate-950 border-2 border-orange-500"></div>
                    <div class="glass-card p-6 rounded-xl">
                        <div class="flex flex-col md:flex-row md:items-center justify-between mb-2">
                            <h3 class="text-xl font-bold text-white">${edu.school}</h3>
                            <span class="text-orange-400 font-mono text-sm">${edu.year}</span>
                        </div>
                        <h4 class="text-lg text-slate-300 mb-2">${edu.degree}</h4>
                        <p class="text-slate-500 text-sm">${edu.details}</p>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function initContact() {
            const container = document.getElementById('socials-list');
            RESUME_DATA.socials.forEach(social => {
                const a = document.createElement('a');
                a.href = social.url;
                a.className = "p-4 bg-slate-800/50 rounded-full text-cyan-400 hover:bg-cyan-500 hover:text-slate-900 transition-colors hover:scale-110 transform";
                a.innerHTML = `<i data-lucide="${social.icon}" class="w-5 h-5"></i>`;
                container.appendChild(a);
            });

            const emailBtn = document.getElementById('email-btn');
            const email = RESUME_DATA.socials.find(s => s.name === 'Email');
            if (email) emailBtn.href = email.url;
        }

        function initFooter() {
            document.getElementById('year').textContent = new Date().getFullYear();
            document.getElementById('footer-name').textContent = RESUME_DATA.name;
        }

        // --- Logic ---

        function setupIntersectionObserver() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
        }

        function setupStickyHeader() {
            const header = document.getElementById('header');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    header.classList.add('glass-nav', 'py-3');
                    header.classList.remove('py-5');
                } else {
                    header.classList.remove('glass-nav', 'py-3');
                    header.classList.add('py-5');
                }
            });
        }

        function setupAvatarUpload() {
            const input = document.getElementById('avatar-input');
            input.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    if (file.size > 2 * 1024 * 1024) {
                        alert('图片大小请限制在 2MB 以内');
                        return;
                    }
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        const result = reader.result;
                        document.getElementById('avatar-img').src = result;
                        try {
                            localStorage.setItem('nexus_resume_avatar', result);
                        } catch (e) {
                            console.warn('LocalStorage full');
                        }
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        // --- Export Functions for Global Scope Access (HTML onclick) ---
        
        window.downloadResume = () => {
             // Generate HTML content dynamically
             const content = `
                <!DOCTYPE html>
                <html>
                <head><title>${RESUME_DATA.name} - 简历</title></head>
                <body>
                    <h1>${RESUME_DATA.name}</h1>
                    <p>${RESUME_DATA.tagline}</p>
                    <hr/>
                    <h2>工作经历</h2>
                    ${RESUME_DATA.experience.map(e => `<h3>${e.role} at ${e.company}</h3><p>${e.description.join('; ')}</p>`).join('')}
                <script type="module" src="/index.tsx"></script>
</body>
                </html>
             `;
             const blob = new Blob([content], { type: 'text/html' });
             const url = URL.createObjectURL(blob);
             const a = document.createElement('a');
             a.href = url;
             a.download = `${RESUME_DATA.name}_简历.html`;
             a.click();
        };

        window.previewResume = () => {
             // Simple preview in new tab
             window.print();
        };

        // --- AI ChatBot Logic ---
        
        // Define toggle function globally
        window.toggleChat = () => {
            const windowEl = document.getElementById('chat-window');
            const icon = document.getElementById('chat-toggle-icon');
            
            if (windowEl.classList.contains('hidden')) {
                windowEl.classList.remove('hidden');
                requestAnimationFrame(() => {
                    windowEl.classList.remove('scale-90', 'opacity-0');
                    windowEl.classList.add('scale-100', 'opacity-100');
                });
                icon.setAttribute('data-lucide', 'x');
            } else {
                windowEl.classList.remove('scale-100', 'opacity-100');
                windowEl.classList.add('scale-90', 'opacity-0');
                setTimeout(() => windowEl.classList.add('hidden'), 300);
                icon.setAttribute('data-lucide', 'message-square');
            }
            lucide.createIcons();
        };

        const chatForm = document.getElementById('chat-form');
        const chatInput = document.getElementById('chat-input');
        const chatMessages = document.getElementById('chat-messages');
        const chatSubmit = document.getElementById('chat-submit');

        let isTyping = false;
        
        // Setup API Key shim for environments where process.env isn't standard
        if (typeof process === "undefined") {
            window.process = { env: { API_KEY: "" } };
        }

        chatForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const text = chatInput.value.trim();
            if (!text || isTyping) return;

            // Add User Message
            appendMessage('user', text);
            chatInput.value = '';
            isTyping = true;
            chatSubmit.disabled = true;

            // Add Typing Indicator
            const typingId = 'typing-' + Date.now();
            appendTypingIndicator(typingId);

            try {
                const response = await generateGeminiResponse(text);
                removeMessage(typingId);
                appendMessage('model', response);
            } catch (error) {
                console.error(error);
                removeMessage(typingId);
                appendMessage('model', "抱歉，我现在连接大脑有点困难，请稍后再试。(请确保已配置 process.env.API_KEY)");
            } finally {
                isTyping = false;
                chatSubmit.disabled = false;
                chatInput.focus();
            }
        });

        function appendMessage(role, text) {
            const div = document.createElement('div');
            div.className = `flex gap-3 ${role === 'user' ? 'flex-row-reverse' : 'flex-row'} fade-in`;
            div.innerHTML = `
                <div class="w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${role === 'user' ? 'bg-slate-700' : 'bg-cyan-600'}">
                    <i data-lucide="${role === 'user' ? 'user' : 'bot'}" class="w-4 h-4 text-white"></i>
                </div>
                <div class="max-w-[80%] rounded-xl p-3 text-sm leading-relaxed ${role === 'user' ? 'bg-slate-800 text-slate-100 rounded-tr-none' : 'bg-cyan-900/40 border border-cyan-800/50 text-cyan-100 rounded-tl-none'}">
                    ${text}
                </div>
            `;
            chatMessages.appendChild(div);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            lucide.createIcons();
        }

        function appendTypingIndicator(id) {
            const div = document.createElement('div');
            div.id = id;
            div.className = "flex gap-3 flex-row";
            div.innerHTML = `
                <div class="w-8 h-8 rounded-full bg-cyan-600 flex items-center justify-center shrink-0">
                    <i data-lucide="bot" class="w-4 h-4 text-white"></i>
                </div>
                <div class="bg-cyan-900/40 border border-cyan-800/50 rounded-xl rounded-tl-none p-3 flex items-center gap-1">
                    <span class="w-1.5 h-1.5 bg-cyan-400 rounded-full typing-dot"></span>
                    <span class="w-1.5 h-1.5 bg-cyan-400 rounded-full typing-dot"></span>
                    <span class="w-1.5 h-1.5 bg-cyan-400 rounded-full typing-dot"></span>
                </div>
            `;
            chatMessages.appendChild(div);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            lucide.createIcons();
        }

        function removeMessage(id) {
            const el = document.getElementById(id);
            if(el) el.remove();
        }

        async function generateGeminiResponse(userPrompt) {
            const apiKey = process.env.API_KEY;
            if (!apiKey) {
                return "演示模式：未检测到 API Key。请在代码中配置您的 API Key 以使用真实 AI 功能。";
            }

            const ai = new GoogleGenAI({ apiKey });
            
            const systemPrompt = `
              你是一个AI助手，代表曹婷（Cao Ting），一位资深的HRBP和AI应用探索者。
              你的目标是根据以下JSON数据回答有关曹婷的职业背景、技能和项目的问题。
              
              简历数据:
              ${JSON.stringify(RESUME_DATA)}

              指导原则:
              1. 保持专业、友好且简洁的语气。
              2. 如果被问及数据中没有的信息，请礼貌地说明你没有相关信息。
              3. 尽可能强调具体的成就指标。
              4. 保持回答简短（100字以内）。
              5. 使用第三人称（助手）的口吻回答。
              6. 请始终使用中文回答。
            `;

            const modelId = 'gemini-2.5-flash';
            
            try {
                const response = await ai.models.generateContent({
                  model: modelId,
                  contents: [
                    { role: 'user', parts: [{ text: systemPrompt }] },
                    { role: 'user', parts: [{ text: userPrompt }] }
                  ],
                });
                return response.text;
            } catch (err) {
                console.error("API Call Failed", err);
                throw err;
            }
        }
    </script>
</body>
</html>
